# 7.Kanban

## 7.1.学习Kanban

看板是一种基于精益思想的软件开发方法。

看板和其他方法有些不一样。比如 Scrum 或者 Rational 统过程（RUP），他们会事先定义有哪些角色，应该有什么会议，甚至如何开这些会议，等等。另一方面，看板从你的现状开始，帮你了解现状，助你识别下一步改进的机会。

### 7.1.1.从信息冰箱到信息辐射源

书中的提到的一个场景是, 敏捷教练Marcus要求员工们用粗笔将JIRA上的任务写到白板上: 

>“你们写完，就贴在白板上。”Joakim 要求大家按照优先级从上往下贴在白板上。这个团队用了几分钟在电脑屏幕和白板之间来来回回走了几圈就把 6 个即时贴在白板上贴成了一列。当大家重新站定，Joakim 面朝大家问道，“你们都同意吗？这就是你们现在正在做的工作？

>“是的。”Cesar, Frank 和 Beth 几乎异口同声的说道。Adam 和其他开发人员却沉默地看着地板。

>很快大家发现那些工作项在工作量和内容方面千差万别，比如：额外的需求，小的支持任务，报答其他部门的帮忙和系统的例行维护。当公司高层希望完成什么事情的时候，他们可能直接在走廊里面就把工作交代给团队的某个成员了，这是常有的事情。

>“这些任务是很难拒绝的。”Adam 说道，“我们不知道如何排定优先级或者是否可以拒绝某些工作。但我想我们可以把这些工作先说出来。”

>“好吧，JIRA 中没有记录这些工作。”Beth 说道，“如果大家在干的工作没有记录到 JIRA 中，那么我们就不能相信 JIRA 里的信息。”

>“那么你们该怎么做呢？”Joakim 继续问道。

>“好吧，我猜如果我们能确保每-项工作都能记录到 JIRA 中，这个问题就解决了，对吗？”Beth 说道，“这样所有的工作就都记录在一个地方，而且也能容易的跟其他人共享这些信息，特别是那些没能跟我们坐在一起的团队。”

>“没错。”Joakim 说道，“那么使用电子工具有什么缺点吗？”“撇开我的立场来说，没有。”Eric 快速说道。

>“嗯，在使用 JIRA 过程中，我们经常会不知所措。”Beth 说道，“我们不止一次地发现，比如，同样的工作由两个人在进行。为了发现这些问题，我们要进行大量的查询。”

>“我们该怎么做才能便于我们进行类似的查询呢？”Joakim 问道。

>“嗯，”Beth 继续说道，“我猜我们需要能容易的看到这一切，比如贴在墙上或者别的地方。”“答对了！”Marcus 再也掩饰不住兴奋之情。“把工作贴在墙上！每项你们在进行的工作，写在即时贴上然后贴在墙上，仅仅这一件小事带给你们工作的变化都会令你们吃惊不已。”根据经验而言，Marcus 知道这其实是一件大事，特别是对于很多刚开始敏捷开发的组织而言。

>为了在实践中体会这种变化，Marcus 建议大家为每个工作项立刻创建一张即时贴，然后贴在白板上。

>“每个人都写完了吗？”过了一两分钟后 Marcus 问道。

>之前贴了 6 张卡片，对应于 JIRA 中的工作记录，紧挨着这 6 张卡片，大家又贴了八张新卡片。

>“天啊！”Frank 大叫道，“这是真的吗？”

>“我们早就告诉过你！”Daphne 一边说着，一边把双手完全张开，“看看这边，我们接受了太多的工作。”

>“我知道，但我从来没有意识到。Cesar 挠着头说，“兄弟们，这段时间对于你们肯定是一段充满压力的槽糕经历。”“这确实比 JIRA 中的工作多多了。”Beth一边说着，一边数着即时贴的数目。

>“这就是我们一直在说的问题。”Eric 再一次调高声调说道。


**从电子工具 JIRA 中挑选的信息，我们一般称电子工具为‘信息冰箱’，通过一张大白板进行可视化，可以称为信息辐射源。这种信息呈现是很明显的，并且当人们经过时就可以清楚的看到。而电子工具，我认为，有些时候更像信息冰箱，你必须要打开它到处找寻想要的信息**。

可视化工作

* 让隐藏的工作无所遁形
  * 为每个工作项建立一个即时贴即可轻易做到 
* 帮你理清 
  * 谁在干什么
  * 你正在处理的工作 
  * 进行中的工作数量
* 工作可视化之后，信息将散播给看到的每个人


### 7.1.2.工作量映射

>最终大家决定整个工作流程的起点是工作被记录到 JIRA 时，终点是生产系统上线。

>“我不太明白为什么不从头到尾跟踪它们的进展呢？”Daphne 说道。

>“那好，我们把工作流程的环节在白板上划为不同的列。”Joakim 准备开始在白板上画了，但是他突然停下来了。他之前已经试过很多次为团队绘制白板，也知道最终这个白板会沦为他自己的工具而不是整个团队的。幸运的是，这个问题有个简单的解决办法。“还是由你画会更好。”Joakim 把白板笔递给 Beth。

>“为了标示某些工作处于特定的阶段，我们会把即时贴放人对应名字的列中。”Marcus 解释道。

>“但这些名字或者阶段是什么呢？”Beth 看上去有些困惑，因为 Joakim 没有写下任何名字。

>‘是的，这就是你们自已需要解决的。”Joakim 笑着说道，“我们不能替你们做所有的事。在 JIRA 中，那些没有完成的工作，你们用什么状态描述？”

>“实际上，”Marcus -边说，-边伸出一。根指头，“我们建议大家用白板笔在白板上绘制。千万不要做成永久不变的，不要过早地使用胶带和其他东西绘制列，因为那可能使你不愿意去改变。而随着你学习的深入，改变是不可避免的。”

![image](https://clsaa-markdown-imgbed-1252032169.cos.ap-shanghai.myqcloud.com/very-java/2019-03-24-062115.png)

工作流映射到白板上

* 识别所有阶段，从工作进入到工作离开团队 
* 不要奢求完美 
  * 检视并进行调整
* 工作直到对客户产生价值才算是完成
* 通过可视化工作流，你可以看到
  * 工作状态
  * 潜在的问题，比如工作没有进展并在某个阶段前堆积如山

### 7.1.3.工作项

卡片上有什么内容？

* 从卡片上你可以
  * 看到工作项的进展状态。
  * 能够决定下一步如何处理 
* 常见的属性为。
  * 工作项描述
  * 电子系统中的唯一标识
  * 完成期限
  * 谁在处理这个工作项
  * 工作类型（比如 bug 或者常规工作）

![image](https://clsaa-markdown-imgbed-1252032169.cos.ap-shanghai.myqcloud.com/very-java/2019-03-24-063827.png)

当减少并行或者同时开展的工作时，前置时间也减少了。

在制品（WIP）是同时进行中的工作数量。减少在制品使其快速流过整个工作流，即前置时间缩短。

“最后，我们不再关注是否每个工人的工作都是最有效率的。”Joakim 说道，这是给 Cesar 的建议，“在第-轮中，在最后一个工人工作之前，有大量的等待时间，但每个工人都竭尽所能的完成整个批次，然后才交给下一个工人。另外，**在最后一轮中，前置时间是最短的，但每个工人的工作时间都延长了，从个人来看工作效率下降了，但整个团队的效率最高**。”

### 7.1.4.限制在制品

* 致力于减少同时处理的工作项 
* 批量规模越小，前置时间越短
* 流动效率提升的同时资源效率会有所降低 
* 类似传递便士的游戏或模拟方法是教人抽象概念的很有力的方式

>“在制品规模过低导致大量闲置，这对降低前置时间虽然有好处，但大多数公司可能不会愿意给无所事事的人员支付薪水。”你需要在这两者之间进行平衡：快速流动和每个人都有工作。你希望设置- -个较低的在制品规模进行限制，但也许不应该是'1'那么低。”

>“现在大家对于找到-一个数字来进行限制应该没有问题了吧？”Joakim 看了看表，发现再不继续向下讨论就来不及了。

>“嗯，找到一个很简单，但是否正确呢？”Frank 问道。

>“先把它当作一个限制，不要试图一开始就找到正确的答案。”Marcus 说道，“就如同我们之前说的，随着时间的流逝，你们会逐步地检查和适应。如果大家决定每人-一个工作项，该怎么简单地设置这个限制呢？”

>“在每一列上面把工作人员的个数写上作为限制？”Adam 建议道。

>“是的，好主意！那看上去是什么样子呢？介意帮我们写下来吗？”Marcus 递给 Adam 一支记号笔又退了回来。

>“哦，我猜想因为我是目前唯一的测试人员，那么这里就是 1。”Adam 在“测试”这列的上面写下一个大大的 1。

![image](https://clsaa-markdown-imgbed-1252032169.cos.ap-shanghai.myqcloud.com/very-java/2019-03-24-065859.png)

>在“验收”这一列中，Marcus 将其- -分为二，划出“就绪”列和“进行中”列。然后他转过身对着大家说道，“现在来看，什么处于等待状态，什么处于进行状态，就-清二楚了。当‘就绪’ 这一列开始有工作填充的时候，我们就可以叫 Beth 和 Cesar 过来。””

>“这不是和‘测试’及‘等待运维发布’列很像？”Daphne 说道。

![image](https://clsaa-markdown-imgbed-1252032169.cos.ap-shanghai.myqcloud.com/very-java/2019-03-24-070228.png)

限制在制品

* 立即实施：停止立项并开始完成 
* 限制在制品将使改进机会浮出水面
  * 着手改进后会获得更快的流动
* 不要企图找到一个唯一正确的数字作为团队的在制品限制规模
* 通常在制品规模越低越好。一个经验法则如下
  * 在制品规模高会有工作闲置
  * 在制品规模低会有人要闲置
* 在制品限制不是仅为了设立规则，而是为了触发讨论

### 7.1.5.紧急工作

Joakim 转动着眼睛，快速跟着说道：“这是一个常见的情况。一种常用的方法是为这些紧急工作在白板上创建一条特殊的通道，通常我们会称之为快速通道。”

Marcus 一边把虚构的手枪放进皮套，一边在 Joakim 解释时在白板的顶部加入了一条新的通道。

![image](https://clsaa-markdown-imgbed-1252032169.cos.ap-shanghai.myqcloud.com/very-java/2019-03-24-070522.png)

快速通道

* 处理特殊情况的常用方式
  * 如紧急工作
* 通常在白板上刻划为单独通道 
* 快速通道的相关规则如下：
  * 任何时候最多只能有一个工作项在快速通道内
  * 每周最多有一个紧急工作
  * 快速通道内的工作项无需计入在制品限制

### 7.1.6.度量

在建立好白板之后，你就可以轻松地跟踪两个既简单又强大的度量指标一前置时间和吞吐量了。

![image](https://clsaa-markdown-imgbed-1252032169.cos.ap-shanghai.myqcloud.com/very-java/2019-03-24-091423.png)

![image](https://clsaa-markdown-imgbed-1252032169.cos.ap-shanghai.myqcloud.com/very-java/2019-03-24-091624.png)

度量

* 有利于团队改进
* 团队自己选择度量指标，且不要将度量指标用于绩效考核
* 两个常用的度量指标为：
  * 前置时间是整个工作流的时间
  * 吞吐量是一定时间段内完成的工作项数量


## 7.2.看板原则

### 7.2.1.概述

看板与Scrum/XP完全不同，它根本没有事先规定那么多内容。它更像是个“元流程”，可以适用于你现在使用的任何流程。这真是太棒了，因为这意味着你可以不用改变任何东西而直接基于自已现状开始使用看板进行改进。是的，不需要新的流程，不需要新的角色，更不需要恼人的组织架构重组。

看板方法（Kanban，大写 K）种在组织中创建渐进变革的方法，由大卫-安德森（David Anderson）创立并完成著作（看板方法：科技企业渐进变革成功之道》（Blue Hole Press, 2010, http: //amzn. Com/ B0 O8 H1 APTO）。

看板（有时小写字母 k，有时大写字母 K）一有时指的是一种可视化流程管理系统，用以描述生产什么。何时生产以及生产多少，有时指的是实际的视觉信号。

看板系统一用以跟踪在制品的系统。举个例子来说，一面看板墙加上信号卡和工作中遵循的规则就是一个看板系统。

你应该知道，仅仅知道看板这个词相关的知识，就可以让你的朋友对你的 8 语知识刮目相看。看板这个词是两个 8 语词组合在一起得到的：kan 在 8 语中是可视的意思，ban 是卡片的意思，组合在一起就是“可视化卡”或者“信号卡”的意思。

看板这个概念源于丰田，在丰田生产系统（TPS）中，看板的发明解决了准时制生产方式（just-in-time）的调度问题。当西方研究人员研究丰田生产系统时，他们把它称之为精益生产系统，后来称之为精益制造和精益思想”。看板源于丰田生产系统和精益生产，这就是为什么你会发现在本书中和其他同类的看板书籍中，有很多地方引用了上述概念。

### 7.2.2.核心原则

* 可视化
* 限制在制品
* 管理流动

#### 可视化

在 Kanbaneros 团队的案例中，我们是从可视化他们的工作开始的。通过创建代表工作项的即时贴，并在一个可视化的工作流白板上跟踪每个工作项的当前状态，就可以很容易地实现可视化。这是一个很棒的方式，可以帮你了解你的工作，反思你的工作是如何运作的”，并开始发现在工作流程中的改进机会。

可视化能立刻产生巨大的影响。仅仅把之前隐藏的很多信息可视化，就可以帮你解决很多问题。

可视化还有其他方面的影响，因为你也可以开始针对工作项制定隐含的规则。比如，每个人可能都觉得他们知道你是如何处理一个特性需求的，然而通过将工作流在白板上按列展示出来，整个团队对实际的过程就一目了然了。通过这样的做法，你对于工作的处理规则一旦有所不同，就变得非常明显。这可能引发一场讨论，用来澄清工作的规则，而且你可以轻易地将这些规则记录在可视化白板上，以便所有团队成员按照同样的方式工作。

#### 限制在制品

便士传递游戏, 这个游戏说明了限制在制品的原理。简而言之，这个原则就是针对你能够同时进行的工作项人为地设置限制。这样做最明显的好处就是同时处理较少的工作项，使得每项工作更快地完成。

因为其他一些微妙的原因，限制在制品也是很重要的。通过设置在制品限额，你将在工作流中创造些许紧张。这本身是个好事情，因为它能暴露系统中的问题，或者是 Kanbaneros 案例中的“未曾意识到的改善机会”。

限制在制品将把改进的机会呈现在表面。通过工作流观察，流动可能迟滞（即时贴在白板上的移动非常缓慢），可能积压（在某列中有很多即时贴），也可能完全停止（工作项-直等待）。这些都可以作为你改进整个系统的指标。你用于解决这些问题的做法，取决于是否带来了改善。

如果你想进行改进，就应该知道目标是什么。而这恰恰是看板最后一个原则发挥作用之处：管理工作流使之快速且毫无中断地流动起来。

#### 管理流

这只是整个流程持续优化之旅的开始，而且你将永无完成的一天，这听起来是个坏消息。工作流程总是能找到改进点，因为流程中总是存在某个瓶颈会拖延你的工作”。庆幸的是，这些问题在白板上很容易显现出来。不仅如此，往往越严重的问题越早暴露，而且一旦解决掉，工作的流动就会明显改进。

### 7.2.2.最佳实践与原则

* 可视化一如前所述。
* 限制在制品如前所述。
* 管理流动如前所述。
* 显式化流程规则一通过明确的规则，就可以开始对整个流程展开讨论，而且这种讨论是基于客观的数据而不是假想、感觉或是传闻。
* 建立反馈环路一这个实践关注的是从你的流程中获得的反馈。例如，运营回顾就是对流程本身的回顾。
* 协作式改进、试验中演进（使用模型和科学方法）这个实践鼓励人们使用模型（如约束理论或者精益思想）来推动整个团队持续改进。

本书采用了一种务实的方法来介绍看板，而且后加的三个实践对三个基本原则的扩展非常适用。

* 显式化流程规则一显式化流程规则和工作可视化是一脉相承的。虽然把明确的规则公开写在白板上很重要，但这往往不是最重要的，反而是针对于即将落实到位的规则展开讨论并达成一致才是最重要的。虽然将规则明确出来是很棒的，但我们认为这本身就是工作可视化原则的一部分。
* 建立反馈环路一对于我们而言，这是管理流动基本原则的一部分。为了促进工作流动，反馈环路是必要的，所以应该在需要的地方建立反馈环路。
* 协作式改进、试验中演进（使用模型和科学方法我们完全同意这一实践的重要性。这一观念深植于看板所基于的精益原理之中，以至于我们觉得这并非看板本身的原则，而是看板发源的环境和生态。

后来，事情变得更加复杂了，因为大卫-安德森使用“原则”这一概念来描述如下内容。

* 从现状开始。
* 追求增量和渐进的改变。
* 初始时，尊重现有的角色、职责和头衔。
* 发挥组织中的各级领导力。